# SourceNavigator æµ‹è¯•å¥—ä»¶

è¿™ä¸ªç›®å½•åŒ…å«äº† SourceNavigator æ‰©å±•çš„æµ‹è¯•è„šæœ¬ï¼ŒæŒ‰åŠŸèƒ½åˆ†ç±»ç»„ç»‡ã€‚

## ğŸ“ ç›®å½•ç»“æ„

```
tests/
â”œâ”€â”€ README.md                    # æœ¬æ–‡ä»¶
â”œâ”€â”€ diagnostic/                  # è¯Šæ–­å·¥å…·
â”‚   â””â”€â”€ diagnose-multi-window.js # å¤šçª—å£é—®é¢˜è¯Šæ–­å·¥å…·
â”œâ”€â”€ simple-ipc/                 # åŸºç¡€IPCé€šä¿¡æµ‹è¯•
â”‚   â”œâ”€â”€ simple-ipc-server.js    # ç®€å•IPCæœåŠ¡å™¨
â”‚   â”œâ”€â”€ simple-ipc-client.js    # ç®€å•IPCå®¢æˆ·ç«¯
â”‚   â””â”€â”€ test-simple-ipc.js      # IPCé€šä¿¡å¯è¡Œæ€§æµ‹è¯•
â””â”€â”€ multi-client/                # å¤šå®¢æˆ·ç«¯å’Œå¤šçª—å£æµ‹è¯•
    â”œâ”€â”€ mock-client.js           # æ¨¡æ‹Ÿå®¢æˆ·ç«¯è¿›ç¨‹
    â”œâ”€â”€ test-shared-multi-clients.js  # å®Œæ•´çš„å¤šå®¢æˆ·ç«¯æµ‹è¯•ï¼ˆæ¨èä½¿ç”¨ï¼‰
    â”œâ”€â”€ test-simple-multi-window.js   # ç®€åŒ–çš„å¤šçª—å£æµ‹è¯•
    â”œâ”€â”€ test-multi-clients.js         # æ—§ç‰ˆå¤šå®¢æˆ·ç«¯æµ‹è¯•
    â”œâ”€â”€ test-multi-window-connection.js  # çª—å£è¿æ¥æµ‹è¯•
    â””â”€â”€ test-shared-server.js          # å¤§å‹ç»¼åˆæµ‹è¯•ï¼ˆå¾…åºŸå¼ƒï¼‰
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### è¯Šæ–­å¤šçª—å£é—®é¢˜

å¦‚æœé‡åˆ°"ç«¯å£è¢«å ç”¨"é”™è¯¯æˆ–å¤šçª—å£è¿æ¥é—®é¢˜ï¼š

```bash
node tests/diagnostic/diagnose-multi-window.js
```

### æµ‹è¯•å¤šå®¢æˆ·ç«¯åŠŸèƒ½

éªŒè¯å¤šä¸ªVSCodeçª—å£å…±äº«åŒä¸€ä¸ªMCPæœåŠ¡å™¨ï¼š

```bash
# æ¨èï¼šå®Œæ•´çš„å¤šå®¢æˆ·ç«¯æµ‹è¯•
node tests/multi-client/test-shared-multi-clients.js

# ç®€åŒ–ï¼šåªæµ‹è¯•çª—å£è¿æ¥
node tests/multi-client/test-simple-multi-window.js
```

### æµ‹è¯•åŸºç¡€IPCé€šä¿¡

éªŒè¯node-ipcåº“çš„å¤šå®¢æˆ·ç«¯é€šä¿¡èƒ½åŠ›ï¼š

```bash
node tests/simple-ipc/test-simple-ipc.js
```

## ğŸ“‹ æµ‹è¯•è„šæœ¬è¯´æ˜

### æ¨èä½¿ç”¨çš„æµ‹è¯•è„šæœ¬

1. **`diagnose-multi-window.js`** â­
   - å…¨é¢çš„é—®é¢˜è¯Šæ–­å·¥å…·
   - æ£€æŸ¥ç«¯å£å ç”¨ã€é”æ–‡ä»¶ã€æœåŠ¡å™¨çŠ¶æ€
   - æä¾›è¯¦ç»†çš„è§£å†³æ–¹æ¡ˆå»ºè®®

2. **`test-shared-multi-clients.js`** â­
   - å®Œæ•´çš„å¤šå®¢æˆ·ç«¯æµ‹è¯•
   - åŒ…å«å·¥å…·è°ƒç”¨è·¯ç”±æµ‹è¯•
   - æ¨¡æ‹ŸçœŸå®çš„VSCodeçª—å£åœºæ™¯

3. **`test-simple-multi-window.js`** â­
   - ç®€åŒ–çš„å¤šçª—å£è¿æ¥æµ‹è¯•
   - ä¸“æ³¨äºæœåŠ¡å™¨æ£€æµ‹å’Œå¤ç”¨é€»è¾‘
   - å¿«é€ŸéªŒè¯æ ¸å¿ƒåŠŸèƒ½

### å®éªŒæ€§/æ—§ç‰ˆæµ‹è¯•è„šæœ¬

- `test-shared-server.js` - å¤§å‹ç»¼åˆæµ‹è¯•ï¼ŒåŠŸèƒ½é‡å¤ï¼Œå»ºè®®ä½¿ç”¨ä¸Šè¿°æ¨èè„šæœ¬
- `test-multi-clients.js` - æ—§ç‰ˆå¤šå®¢æˆ·ç«¯æµ‹è¯•ï¼Œå­˜åœ¨å…¨å±€IPCå†²çªé—®é¢˜
- `test-multi-window-connection.js` - æ—©æœŸçš„çª—å£è¿æ¥æµ‹è¯•

### åŸºç¡€éªŒè¯è„šæœ¬

- `test-simple-ipc.js` - éªŒè¯node-ipcåº“çš„åŸºæœ¬åŠŸèƒ½
- `simple-ipc-server.js` / `simple-ipc-client.js` - ç‹¬ç«‹çš„IPCé€šä¿¡éªŒè¯

## ğŸ”§ ä½¿ç”¨å»ºè®®

1. **å¼€å‘è¿‡ç¨‹ä¸­**ï¼šä½¿ç”¨ `test-shared-multi-clients.js` è¿›è¡Œå…¨é¢æµ‹è¯•
2. **é‡åˆ°é—®é¢˜æ—¶**ï¼šä¼˜å…ˆè¿è¡Œ `diagnose-multi-window.js` è¿›è¡Œè¯Šæ–­
3. **å¿«é€ŸéªŒè¯**ï¼šä½¿ç”¨ `test-simple-multi-window.js` æ£€æŸ¥åŸºæœ¬åŠŸèƒ½
4. **åŸºç¡€è°ƒè¯•**ï¼šä½¿ç”¨ `test-simple-ipc.js` éªŒè¯IPCé€šä¿¡

## ğŸ§¹ æ¸…ç†è¯´æ˜

- ä¿ç•™äº†ä¸»è¦çš„åŠŸèƒ½æµ‹è¯•è„šæœ¬
- ç§»é™¤äº†é‡å¤å’Œè¿‡æ—¶çš„æ–‡ä»¶
- æŒ‰åŠŸèƒ½åˆ†ç±»æ•´ç†ï¼Œä¾¿äºç»´æŠ¤å’ŒæŸ¥æ‰¾

## ğŸ“ æ³¨æ„äº‹é¡¹

- è¿è¡Œæµ‹è¯•å‰ç¡®ä¿å·²ç¼–è¯‘: `npm run compile`
- æµ‹è¯•å¯èƒ½éœ€è¦åœæ­¢ç°æœ‰çš„æœåŠ¡å™¨è¿›ç¨‹
- æŸäº›æµ‹è¯•ä¼šè‡ªåŠ¨æ¸…ç†èµ„æºï¼ŒæŸäº›éœ€è¦æ‰‹åŠ¨æ¸…ç†
- å¦‚æœæµ‹è¯•å¤±è´¥ï¼Œè¯·æŸ¥çœ‹VSCodeè¾“å‡ºé¢æ¿çš„è¯¦ç»†é”™è¯¯ä¿¡æ¯